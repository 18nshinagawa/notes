(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(20)},15:function(e,t,n){},16:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(4),r=n.n(i),s=(n(15),n(5)),l=n(6),c=n(8),d=n(7),m=n(9),g=(n(16),n(17)),u=(n(18),function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).heading=0,n.math=0,n.objects={math:["math"],code:["code","language"],image:["url","text"],link:["url","text"]},n.object="",n.display=!1,n.html=localStorage.getItem("html")?localStorage.getItem("html"):"<br>",n.images=localStorage.getItem("images")?JSON.parse(localStorage.getItem("images")):{},n.style='\n    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css" integrity="sha384-dbVIfZGuN1Yq7/1Ocstc1lUEm+AT+/rCkibIcC/OmWo5f0EA48Vf8CytHzGrSwbQ" crossorigin="anonymous">\n    <style>\n\n    body {\n        margin: 0;\n        background-color: #333333;\n    }\n\n    #editor {\n        width: 16cm;\n        padding: 2.5cm;\n        margin: 0.3125cm auto;\n        background-color: white;\n        color: #333333;\n        outline: none;\n        font-family: \'georgia\', serif;\n        line-height: 1.5;\n        word-break: break-word;\n        overflow: hidden;\n        caret-color: #4488FF;\n    }\n    \n    ::-moz-selection {\n        background-color: rgba(68, 136, 255, 0.25);\n    }\n    \n    #editor > :first-child {\n        margin-top: 0;\n    }\n    \n    #editor > :last-child {\n        margin-bottom: 0;\n    }\n    \n    img {\n        width: 10.5cm;\n        display: block;\n        margin: auto;\n    }\n\n    .caption {\n        text-align: center;\n        margin-top: 0.5em;\n    }\n\n    .object {\n        -moz-user-select: all;\n    }\n\n    .object[data-object="math"] {\n        max-width: 16cm;\n        overflow: hidden;\n        display: inline-flex;\n    }\n    \n    .object[data-object="math"].display {\n        display: block;\n    }\n\n    a {\n        color: #4488FF;\n    }\n    \n    blockquote {\n        margin: 1em 0;\n        padding: 1em;\n        border-left: 2px solid #333333;\n    }\n\n    blockquote > :first-child {\n        margin-top: 0;\n    }\n    \n    blockquote > :last-child {\n        margin-bottom: 0;\n    }\n    \n    ul, ol {\n        color: inherit;\n    }\n\n    [data-object="code"] {\n        background-color: #EEEEEE;\n        font-family: \'monaco\';\n        max-width: 16cm;\n        overflow: hidden;\n        display: inline;\n        color: #0088FF;\n    }\n\n    [data-object="code"].display {\n        white-space: pre-wrap;\n        display: block;\n        padding: 8px;\n        margin: 1em 0;\n    }\n\n    .token.string {\n        color: #DD4433;\n    }\n\n    .token.keyword {\n        color: #4488FF;\n    }\n\n    .token.function {\n        color: #FF8800;\n    }\n\n    .token.class-name {\n        color: #119955;\n    }\n\n    .token.punctuation {\n        color: #999999;\n    }\n\n    .token.comment {\n        color: #9977BB;\n    }\n\n    .token.operator {\n        color: #888888;\n    }\n\n    table {\n        border-collapse: collapse;\n        margin: auto;\n    }\n\n    td, th {\n        border: 2px solid black;\n        padding: 8px;\n    }\n    \n    .page-break {\n        display: block;\n        height: 0.3125cm;\n        width: calc(100% + 5cm);\n        background-color: #333333;\n        left: -2.5cm;\n        position: relative;\n        margin: 2.5cm 0;\n        -moz-user-select: none;\n    }\n    \n    @media print {\n        #editor {\n            margin: 0;\n            padding: 0;\n            color-adjust: exact;\n        }\n\n        .page-break {\n            page-break-after: always;\n            visibility: hidden;\n        }\n    }\n\n    @page {\n        margin: 2.5cm;\n    }\n\n    </style>\n    ',n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("iframe").contentWindow.document;t.open(),t.write(this.style+'<div id="editor" spellcheck="false" contentEditable="true">'+this.html+"</div>"),t.close(),Array.from(t.getElementsByTagName("h1")).forEach(function(e,t){e.id=e.innerText.replace(/\s/g,""),0===t&&(document.querySelector("title").innerText=e.innerText.replace(/\s/,""))}),Array.from(t.querySelectorAll("h2, h3")).forEach(function(e){e.id=e.innerText.replace(/\s/g,"")}),document.getElementById("iframe").contentWindow.addEventListener("scroll",function(e){document.getElementById("options").style.transform="translateY(-"+t.body.scrollTop+"px)"}),t.getElementById("editor").addEventListener("click",function(t){e.handleClickIframe(t)}),t.execCommand("defaultParagraphSeparator",!1,"p"),t.getElementById("editor").addEventListener("keydown",function(t){e.handleKeyDownIframe(t)}),t.getElementById("editor").addEventListener("keyup",function(t){e.handleKeyUpIframe(t)}),t.getElementById("editor").addEventListener("input",function(t){e.handleInputIframe(t)}),window.addEventListener("beforeunload",function(n){localStorage.setItem("html",t.getElementById("editor").innerHTML),localStorage.setItem("images",JSON.stringify(e.images))}),document.getElementById("iframe").contentWindow.addEventListener("drop",function(e){e.preventDefault();var n=e.dataTransfer.files[0],o=new FileReader;o.onload=function(e){t.getElementById("editor").focus(),t.execCommand("selectAll"),t.execCommand("insertHTML",!1,e.target.result.match(/<div id="editor">([\0-\uFFFF]*)<\/div>/)[1])},o.readAsText(n)})}},{key:"handleKeyDownIframe",value:function(e){var t=document.getElementById("iframe").contentWindow.document,n=document.getElementById("iframe").contentWindow.getSelection().getRangeAt(0);if(3===n.commonAncestorContainer.nodeType&&"editor"===n.commonAncestorContainer.parentElement.id&&t.execCommand("formatBlock",!1,"p"),"MacIntel"===navigator.platform&&e.metaKey||"MacIntel"!==navigator.platform&&e.ctrlKey){if("x"===e.key&&e.shiftKey)e.preventDefault();else if(-1!=="123".indexOf(e.key))e.preventDefault(),t.execCommand("heading",!1,"h"+e.key);else if("0"===e.key)e.preventDefault(),t.execCommand("formatBlock",!1,"p");else if("l"===e.key.toLowerCase())e.preventDefault(),t.execCommand(e.shiftKey?"insertOrderedList":"insertUnorderedList");else if("b"===e.key)e.preventDefault(),t.execCommand("bold");else if("i"===e.key)e.preventDefault(),t.execCommand("italic");else if(-1!=="jghm".indexOf(e.key.toLowerCase()))e.preventDefault(),e.shiftKey?(this.display=!0,document.getElementById("display").classList.add("display")):(this.display=!1,document.getElementById("display").classList.remove("display")),this.object={j:"code",m:"math",h:"link",g:"image"}[e.key.toLowerCase()],t.execCommand("insertHTML",!1,'<span class="selection '+(this.display?"display":"")+'"></span>'),document.getElementById("first").dataset.placeholder=this.objects[this.object][0],document.getElementById("second").dataset.placeholder=this.objects[this.object][1],document.getElementById("options").style.top=t.querySelector(".selection").getBoundingClientRect().top+t.body.scrollTop+"px",document.getElementById("options").style.transform="translateY(-"+t.body.scrollTop+"px)",e.preventDefault(),document.getElementById("options").classList.add("focus"),document.getElementById("first").innerText="",document.getElementById("second").innerText="",document.getElementById("first").focus();else if("p"===e.key)e.preventDefault(),document.getElementById("iframe").contentWindow.print();else if("s"===e.key){e.preventDefault();var o=new Blob([this.style+'<div id="editor">'+t.getElementById("editor").innerHTML+"</div>"],{type:"text/html"}),a=window.document.createElement("a");a.href=window.URL.createObjectURL(o),a.download=document.querySelector("title").innerText+".html",document.body.appendChild(a),a.click(),document.body.removeChild(a)}else if("Enter"===e.key){e.preventDefault();var i=document.getElementById("iframe").contentWindow.getSelection(),r=i.getRangeAt(0),s=!1,l=!1;if(3===r.commonAncestorContainer.nodeType&&"editor"===r.commonAncestorContainer.parentElement.id&&t.execCommand("formatBlock",!1,"p"),3!==r.commonAncestorContainer.nodeType&&(!r.nextSibling||r.nextSibling.classList&&r.nextSibling.classList.contains("page-break"))&&(s=!0),3!==r.commonAncestorContainer.nodeType&&r.Offset===r.commonAncestorContainer.childNodes.length&&(s=!0),r.commonAncestorContainer.nextSibling&&"BR"!==r.commonAncestorContainer.nextSibling.nodeName||!r.commonAncestorContainer.nodeValue||r.commonAncestorContainer.nodeValue.length!==r.endOffset||(l=!0,(!r.commonAncestorContainer.parentElement.nextSibling||r.commonAncestorContainer.parentElement.nextSibling.classList&&r.commonAncestorContainer.parentElement.nextSibling.classList.contains("page-break"))&&(s=!0)),0===r.startOffset&&r.startContainer.parentElement.firstChild===r.startContainer&&(!r.startContainer.parentElement.previousSibling||r.startContainer.parentElement.previousSibling.classList&&r.startContainer.parentElement.previousSibling.classList.contains("page-break")))return;if(3!==r.startContainer.nodeType&&0===r.startOffset&&!r.startContainer.previousSibling)return;if(0===r.startOffset&&r.commonAncestorContainer.parentElement===t.getElementById("editor").firstChild)return;if("editor"===r.commonAncestorContainer.parentElement.id&&r.commonAncestorContainer.previousSibling&&r.commonAncestorContainer.previousSibling.classList.contains("page-break")&&(!r.commonAncestorContainer.previousSibling||r.commonAncestorContainer.previousSibling.classList.contains("page-break")))return;if(s)t.execCommand("insertHTML",!1,'<div class="page-break"><br></div><p><br></p>');else if(t.execCommand("insertHTML",!1,'<div class="page-break"><br></div>'),l){var c=t.createRange();c.setStart(r.commonAncestorContainer.parentElement.nextSibling.nextSibling,0),c.setEnd(r.commonAncestorContainer.parentElement.nextSibling.nextSibling,0),i.removeAllRanges(),i.addRange(c)}else{var d=t.createRange();3===r.commonAncestorContainer.nodeType?(d.setStart(r.commonAncestorContainer.parentElement,0),d.setEnd(r.commonAncestorContainer.parentElement,0)):(d.setStart(r.commonAncestorContainer,0),d.setEnd(r.commonAncestorContainer,0)),i.removeAllRanges(),i.addRange(d)}}else if("Backspace"===e.key){var m=document.getElementById("iframe").contentWindow.getSelection().getRangeAt(0);0===m.startOffset&&m.startContainer.parentElement.previousSibling&&m.startContainer.parentElement.previousSibling.classList.contains("page-break")?e.preventDefault():m.commonAncestorContainer.previousSibling&&m.commonAncestorContainer.previousSibling.classList.contains("page-break")&&e.preventDefault()}}else if("Tab"===e.key)e.preventDefault(),e.shiftKey?t.execCommand("outdent"):t.execCommand("indent");else if("Backspace"===e.key){var g=document.getElementById("iframe").contentWindow.getSelection(),u=g.getRangeAt(0);if(u.startContainer===u.endContainer&&u.startOffset===u.endOffset)if(u.startContainer.previousSibling&&0===u.startOffset&&u.startContainer.previousSibling.classList.contains("object"))e.preventDefault(),g.removeAllRanges(),u.selectNode(u.startContainer.previousSibling),g.addRange(u);else if(u.startContainer.children&&u.startContainer.children[u.startOffset-1]&&u.startContainer.children[u.startOffset-1].classList.contains("object"))e.preventDefault(),g.removeAllRanges(),u.selectNode(u.startContainer.children[u.startOffset-1]),g.addRange(u);else if(u.startContainer.children&&u.startContainer.children[u.startOffset-2]&&u.startContainer.children[u.startOffset-2].classList.contains("object"))e.preventDefault(),g.removeAllRanges(),u.selectNode(u.startContainer.children[u.startOffset-2]),g.addRange(u);else if(0===u.startOffset&&u.startContainer.parentElement.previousSibling&&u.startContainer.parentElement.previousSibling.classList.contains("page-break")){e.preventDefault();var p=t.createRange();p.setStartAfter(u.startContainer.parentElement.previousSibling.previousSibling.firstChild),p.setEndBefore(u.startContainer.parentElement),g.removeAllRanges(),g.addRange(p),t.execCommand("delete");var f=t.createRange();f.setStart(p.startContainer.nextSibling,0),f.setEnd(p.startContainer.nextSibling,0),g.removeAllRanges(),g.addRange(f)}else if(u.commonAncestorContainer.previousSibling&&u.commonAncestorContainer.previousSibling.classList.contains("page-break")){e.preventDefault();var y=t.createRange();y.setStartAfter(u.startContainer.previousSibling.previousSibling.firstChild),y.setEndBefore(u.startContainer),g.removeAllRanges(),g.addRange(y),t.execCommand("delete");var h=t.createRange();h.setStart(y.startContainer.nextSibling,0),h.setEnd(y.startContainer.nextSibling,0),g.removeAllRanges(),g.addRange(h)}}this.handleKeyUpIframe(e)}},{key:"handleKeyUpIframe",value:function(e){var t=document.getElementById("iframe").contentWindow.getSelection(),n=t.getRangeAt(0);n.startContainer.parentElement&&n.startContainer.parentElement.closest(".object")&&(n.setStartBefore(n.startContainer.parentElement.closest(".object")),t.removeAllRanges(),t.addRange(n)),n.endContainer.parentElement&&n.endContainer.parentElement.closest(".object")&&(n.setEndAfter(n.endContainer.parentElement.closest(".object")),t.removeAllRanges(),t.addRange(n))}},{key:"handleClickIframe",value:function(e){var t=document.getElementById("iframe").contentWindow.document,n=e.target.closest(".object");(t.querySelector(".selection")&&t.querySelector(".selection").classList.remove("selection"),n)?(document.getElementById("iframe").contentWindow.getSelection().removeAllRanges(),n.classList.add("selection"),document.getElementById("first").innerText=n.dataset.first,document.getElementById("second").innerText=n.dataset.second,document.getElementById("options").classList.add("focus"),document.getElementById("options").style.top=n.getBoundingClientRect().top+t.body.scrollTop+"px",document.getElementById("options").style.transform="translateY(-"+t.body.scrollTop+"px)",this.object=n.dataset.object,n.classList.contains("display")?(this.display=!0,document.getElementById("display").classList.add("display")):(this.display=!1,document.getElementById("display").classList.remove("display")),document.getElementById("first").dataset.placeholder=this.objects[this.object][0],document.getElementById("second").dataset.placeholder=this.objects[this.object][1],document.getElementById("first").focus()):document.getElementById("options").classList.remove("focus")}},{key:"handleInputIframe",value:function(e){var t=document.getElementById("iframe").contentWindow.document,n=document.getElementById("iframe").contentWindow.getSelection(),o=n.getRangeAt(0);if(Array.from(t.getElementsByTagName("h1")).forEach(function(e,t){e.id=e.innerText.replace(/\s/g,""),0===t&&(document.querySelector("title").innerText=e.innerText.replace(/\s/,""))}),Array.from(t.querySelectorAll("h2, h3")).forEach(function(e){e.id=e.innerText.replace(/\s/g,"")}),"editor"!==o.startContainer.id&&"editor"===o.endContainer.id){var a=t.createRange();a.setStart(o.startContainer.nextSibling.nextSibling,0),n.removeAllRanges(),n.addRange(a)}}},{key:"handleInput",value:function(e){var t=document.getElementById("iframe").contentWindow.document;if(t.querySelector(".selection")){var n=t.createRange(),o=document.getElementById("iframe").contentWindow.getSelection();n.selectNode(t.querySelector(".selection")),o.removeAllRanges(),o.addRange(n)}e&&(t.querySelector(".selection").classList.contains("display")?(this.display=!0,document.getElementById("display").classList.add("display")):(this.display=!1,document.getElementById("display").classList.remove("display"))),t.getElementById("editor").focus(),"image"===this.object?t.execCommand("insertHTML",!1,'<div class="selection object" data-object="image" data-first="'+document.getElementById("first").innerText.replace(/"/g,"&quot;")+'" data-second="'+document.getElementById("second").innerText.replace(/"/g,"&quot;")+'"><div class="image"><img src="'+(this.images[document.getElementById("first").innerText]||document.getElementById("first").innerText.replace(/"/g,"&quot;"))+'"/></div><div class="caption">'+document.getElementById("second").innerText.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div>"):"link"===this.object?t.execCommand("insertHTML",!1,'<span class="selection object" data-object="link" data-first="'+document.getElementById("first").innerText.replace(/"/g,"&quot;")+'" data-second="'+document.getElementById("second").innerText.replace(/"/g,"&quot;")+'"><a href="'+document.getElementById("first").innerText.replace(/"/g,"&quot;").replace(/\s/,"")+'">'+document.getElementById("second").innerText.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a></span>"):"math"===this.object?t.execCommand("insertHTML",!1,'<span class="selection object '+(this.display?"display":"")+'" data-object="math" data-first="'+document.getElementById("first").innerText.replace(/"/g,"&quot;")+'">'+window.katex.renderToString(document.getElementById("first").innerText,{displayMode:this.display,throwOnError:!1,errorColor:"#DD4433"})+"</span>"):"code"===this.object&&t.execCommand("insertHTML",!1,'<span class="selection object '+(this.display?"display":"")+'" data-object="code" data-first="'+document.getElementById("first").innerText.replace(/"/g,"&quot;")+'" data-second="'+document.getElementById("second").innerText+'">'+g.highlight(document.getElementById("first").innerText,g.languages.javascript,"javascript")+"</span>"),document.getElementById("options").style.top=t.querySelector(".selection").getBoundingClientRect().top+t.body.scrollTop+"px",document.getElementById("options").style.transform="translateY(-"+t.body.scrollTop+"px)",e?e.target.focus():t.getElementById("editor").blur()}},{key:"handleKeyDown",value:function(e){if("Escape"===e.key)if(document.getElementById("first").innerText.match(/\S+/g)){var t=document.getElementById("iframe").contentWindow.document,n=t.createRange(),o=document.getElementById("iframe").contentWindow.getSelection();n.setStartAfter(t.querySelector(".selection")),n.setEndAfter(t.querySelector(".selection")),o.removeAllRanges(),o.addRange(n),t.getElementById("editor").focus(),document.getElementById("options").classList.remove("focus"),t.querySelector(".selection").classList.remove("selection")}else{var a=document.getElementById("iframe").contentWindow.document;this.delete(),document.getElementById("options").classList.remove("focus"),a.getElementById("editor").focus()}else("MacIntel"===navigator.platform&&e.metaKey||"MacIntel"!==navigator.platform&&e.ctrlKey)&&-1!=="jghm".indexOf(e.key.toLowerCase())&&e.preventDefault()}},{key:"delete",value:function(e){var t=document.getElementById("iframe").contentWindow.document,n=(t.createRange(),document.getElementById("iframe").contentWindow.getSelection()),o=t.createRange();o.selectNode(t.querySelector(".selection")),n.removeAllRanges(),n.addRange(o),t.execCommand("delete")}},{key:"handleMouseDown",value:function(e){if(document.getElementById("options").classList.contains("focus")&&!document.getElementById("first").innerText.length)this.delete();else{var t=document.getElementById("iframe").contentWindow.document;document.getElementById("options").classList.remove("focus"),t.querySelector(".selection")&&t.querySelector(".selection").classList.remove("selection")}}},{key:"toggleDisplay",value:function(e){e.target.classList.toggle("display"),this.display=!this.display,this.handleInput()}},{key:"handleDrop",value:function(e){var t=this;e.preventDefault();var n=e.dataTransfer.files[0],o=new FileReader;o.onload=function(e){t.images[n.name]=e.target.result,document.getElementById("first").innerText=n.name,t.handleInput()},o.readAsDataURL(n)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{id:"container"},a.a.createElement("div",{id:"options"},a.a.createElement("div",{id:"first",spellCheck:"false",contentEditable:"true",onInput:function(t){return e.handleInput(t)},onKeyDown:function(t){return e.handleKeyDown(t)},onDrop:function(t){return e.handleDrop(t)}}),a.a.createElement("div",{id:"second",spellCheck:"false",contentEditable:"true",onInput:function(t){return e.handleInput(t)},onKeyDown:function(t){return e.handleKeyDown(t)}}),a.a.createElement("div",{id:"display",onClick:function(t){return e.toggleDisplay(t)}},a.a.createElement("div",{id:"check"}),"\xa0display")),a.a.createElement("iframe",{id:"iframe",title:"iframe"}))}}]),t}(a.a.Component)),p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function f(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(a.a.createElement(u,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/notes",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/notes","/service-worker.js");p?(function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):f(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):f(t,e)})}}()},3:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=3}},[[10,1,2]]]);
//# sourceMappingURL=main.9eb3896e.chunk.js.map